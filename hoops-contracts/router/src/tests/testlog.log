
test tests::test_setup::test_setup_verification ... [SETUP] Starting HoopsTestEnvironment setup
[SETUP] Creating test accounts
[SETUP] Deploying tokens
[LOG] Token A deployed at: Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF)
[LOG] Token B deployed at: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)
[LOG] Token C deployed at: Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG)
[SETUP] Minting tokens to admin and user
[LOG] Minted 100000000000000 TokenA to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM)
[LOG] Minted 100000000000000 TokenB to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM)
[LOG] Minted 100000000000000 TokenC to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM)
[LOG] Minted 100000000000000 TokenA to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4)
[LOG] Minted 100000000000000 TokenB to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4)
[LOG] Minted 100000000000000 TokenC to Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4)
[SETUP] Setting up Soroswap environment
[Soroswap] Minting 7010000000000 of token A and 1000000000000 of token B for Pool AB
[Soroswap] Depositing to Pool AB: 7010000000000 A, 1000000000000 B
[Soroswap] Minting 1010000000000 of token B and 1000000000000 of token C for Pool BC
[Soroswap] Depositing to Pool BC: 1010000000000 B, 1000000000000 C
soroswap environment setup complete. Pools: Contract(CBOMCLPAGNR6GMX6KF7CP5MTQCOATKD7BTJTUK7MRRURD4AA5RN63K2N), Contract(CCOHI4QJBBETS5P6F42M3VZM7NDR4CEUE6B5OPZDT7FXHVIJJSVCJPLX), router: Contract(CDXKQTPLDDF4RBMJCCTGV2XQ44DCJOY7XZZKPEDJFKQTECSTYHBOI42O), factory: Contract(CD5M24KZHINN46ZCECBNWYKINAIJGRO4WTZNGUCISPZIYUZZAWDS6H7Y)
[LOG] Soroswap router deployed at: Contract(CDXKQTPLDDF4RBMJCCTGV2XQ44DCJOY7XZZKPEDJFKQTECSTYHBOI42O)
[LOG] Soroswap factory deployed at: Contract(CD5M24KZHINN46ZCECBNWYKINAIJGRO4WTZNGUCISPZIYUZZAWDS6H7Y)
[LOG] Soroswap pool 0 deployed at: Contract(CBOMCLPAGNR6GMX6KF7CP5MTQCOATKD7BTJTUK7MRRURD4AA5RN63K2N)
[LOG] Soroswap pool 1 deployed at: Contract(CCOHI4QJBBETS5P6F42M3VZM7NDR4CEUE6B5OPZDT7FXHVIJJSVCJPLX)
[SETUP] Soroswap environment ready
[SETUP] Setting up Aqua environment
[Aqua] Minting 6999000000000 of token A and 1000000000000 of token B for Pool AB
[Aqua] Depositing to Pool AB: 6999000000000 A, 1000000000000 B
[Aqua] Minting 1000000000000 of token B and 999000000000 of token C for Pool BC
[Aqua] Depositing to Pool BC: 1000000000000 B, 999000000000 C
Aqua pools created: Contract(CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW), Contract(CBNMFT27LQH4FQELKAQM2KFBYPABPTGZOSJDGDDGQWDCM7FU54HFLEBI)
[LOG] Aqua router deployed at: Contract(CC6YSLPYSKOZZFQSYO3UWY6VG5ZFKBXYOVDLAO7CVS26QZAFFR6AWO5K)
[LOG] Aqua factory (router) deployed at: Contract(CC6YSLPYSKOZZFQSYO3UWY6VG5ZFKBXYOVDLAO7CVS26QZAFFR6AWO5K)
[LOG] Aqua pool 0 deployed at: Contract(CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW)
[LOG] Aqua pool 1 deployed at: Contract(CBNMFT27LQH4FQELKAQM2KFBYPABPTGZOSJDGDDGQWDCM7FU54HFLEBI)
[SETUP] Aqua environment ready
[SETUP] Deploying Phoenix factory
[LOG] Phoenix factory deployed at: Contract(CAIASALDBMWE7F7CU5TVNGKXIP22M7CTE5ROQOZFMIZIYDIYV6YRW2V7)
[SETUP] Setting up Phoenix pools
Phoenix LP Init Info AB: LiquidityPoolInitInfo { admin: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM), default_slippage_bps: 2500, fee_recipient: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4), max_allowed_slippage_bps: 5000, max_allowed_spread_bps: 500, max_referral_bps: 5000, stake_init_info: StakeInitInfo { manager: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM), max_complexity: 10, min_bond: 10, min_reward: 10 }, swap_fee_bps: 0, token_init_info: TokenInitInfo { token_a: Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF), token_b: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN) } }
Phoenix LP Init Info BC: LiquidityPoolInitInfo { admin: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM), default_slippage_bps: 2500, fee_recipient: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4), max_allowed_slippage_bps: 5000, max_allowed_spread_bps: 500, max_referral_bps: 5000, stake_init_info: StakeInitInfo { manager: Contract(CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM), max_complexity: 10, min_bond: 10, min_reward: 10 }, swap_fee_bps: 0, token_init_info: TokenInitInfo { token_a: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN), token_b: Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG) } }
Phoenix constant pool AB address: Contract(CAVCZPBF2IBGORHDJFMJPNKVEYJWEZW52NF7M3XIVLUIVLMQO3KESYZA)
Phoenix stable pool BC address: Contract(CDYISRMQ4ME3PF6HRDYFJFLTV4TENJBV2X5HPJU23IFEAQSHKL2H2X4B)
Phoenix Pools created: Contract(CAVCZPBF2IBGORHDJFMJPNKVEYJWEZW52NF7M3XIVLUIVLMQO3KESYZA), Contract(CDYISRMQ4ME3PF6HRDYFJFLTV4TENJBV2X5HPJU23IFEAQSHKL2H2X4B)
[LOG] Phoenix pool 0 deployed at: Contract(CAVCZPBF2IBGORHDJFMJPNKVEYJWEZW52NF7M3XIVLUIVLMQO3KESYZA)
[LOG] Phoenix pool 1 deployed at: Contract(CDYISRMQ4ME3PF6HRDYFJFLTV4TENJBV2X5HPJU23IFEAQSHKL2H2X4B)
[Phoenix] Minting 7000000000000 of token A and 1000000000000 of token B for Pool AB
[Phoenix] Depositing to Pool AB: 7000000000000 A, 1000000000000 B
[Phoenix] Minting 999000000000 of token B and 1000000000000 of token C for Pool BC
[Phoenix] Depositing to Pool BC: 999000000000 B, 1000000000000 C
[SETUP] Phoenix environment ready
[SETUP] Setting up Comet environment
[Comet] Registering factory contract
[Comet] Uploading pool WASM
[Comet] Initializing factory
[Comet] Creating pool: token_a/token_b (80/20, 1M each)
[Comet] Pool AB address: Contract(CDB66KXGRE5VULNX2QCO4OFKJ4FLV7J3C64DNSGS2PG4IYYO3IMF6QVS)
[Comet] Creating pool: token_b/token_c (50/50, 1M each)
[Comet] Pool BC address: Contract(CALOLHPDL32YUZ6THJ5TA7LX7QGOOXFWIUJR4NE6T7LNS66VSE5U7EUY)
[Comet] Minting 8000000 of token A and 2000000 of token B for Pool AB
[Comet] Depositing to Pool AB: 8000000 A, 2000000 B
[Comet] Minting 5000000 of token B and 5000000 of token C for Pool BC
[Comet] Depositing to Pool BC: 5000000 B, 5000000 C
[Comet] All pools created: Vec(Ok(Contract(CDB66KXGRE5VULNX2QCO4OFKJ4FLV7J3C64DNSGS2PG4IYYO3IMF6QVS)), Ok(Contract(CALOLHPDL32YUZ6THJ5TA7LX7QGOOXFWIUJR4NE6T7LNS66VSE5U7EUY)))
[LOG] Comet factory deployed at: Contract(CAQ5UHPIIQ2LXWNVOLLZFEQOUYIWGPGDEMNH4WJQCX3C4LPOI6EKQH5V)
[LOG] Comet pool 0 deployed at: Contract(CDB66KXGRE5VULNX2QCO4OFKJ4FLV7J3C64DNSGS2PG4IYYO3IMF6QVS)
[LOG] Comet pool 1 deployed at: Contract(CALOLHPDL32YUZ6THJ5TA7LX7QGOOXFWIUJR4NE6T7LNS66VSE5U7EUY)
[SETUP] Comet environment ready
[SETUP] Deploying Soroswap adapter
[LOG] Soroswap adapter deployed at: Contract(CBJPUABS5H6EDPZ7AGJYOEWEDQ5HWMZDJNJYFGTTHDEI5FHONNL2BQN5)
[SETUP] Soroswap adapter initialized
[SETUP] Deploying Aqua adapter
[LOG] Aqua adapter deployed at: Contract(CDNHTIE2GANHCMIKRZQEC26N6YNJ4M3EWEQ3IXO6AVVO7TANOHBNXAVU)
[SETUP] Aqua adapter initialized
[SETUP] Deploying Phoenix adapter
[LOG] Phoenix adapter deployed at: Contract(CBEMG5GOIFQOIUFIH6S4TDBQ32RFS6QHAKKLZO4MBXXCA26YPZMELO5S)
[SETUP] Phoenix adapter initialized
[SETUP] Deploying Comet adapter
[LOG] Comet adapter deployed at: Contract(CCLYTZZ7FAN6SSHV4QW2LEH7PMSQWBXM4T5A66SUPGJXEFXASZTM7YHA)
[SETUP] Comet adapter initialized
[SETUP] Deploying Hoops router
[LOG] Hoops router deployed at: Contract(CB76PKAOC5LBYBH4THVOZGG3U6Y4NUBWGBZVEIN4NCWHUUHRU2BNGNPE)
[SETUP] Hoops router initialized
[SETUP] HoopsTestEnvironment setup complete
[REPORT] Soroswap Pools:
[REPORT]   Pool: Contract(CBOMCLPAGNR6GMX6KF7CP5MTQCOATKD7BTJTUK7MRRURD4AA5RN63K2N)
[REPORT]     Tokens: Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF), Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)
[REPORT]     Reserves: 7010000000000, 1000000000000
[REPORT]     LP Token: Contract(CBOMCLPAGNR6GMX6KF7CP5MTQCOATKD7BTJTUK7MRRURD4AA5RN63K2N) User LP Balance: 2647640457974
[REPORT]   Pool: Contract(CCOHI4QJBBETS5P6F42M3VZM7NDR4CEUE6B5OPZDT7FXHVIJJSVCJPLX)
[REPORT]     Tokens: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN), Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG)
[REPORT]     Reserves: 1010000000000, 1000000000000
[REPORT]     LP Token: Contract(CCOHI4QJBBETS5P6F42M3VZM7NDR4CEUE6B5OPZDT7FXHVIJJSVCJPLX) User LP Balance: 1004987561112
[REPORT] Aqua Pools:
[REPORT]   Pool: Contract(CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW)
[REPORT]     Tokens: Vec(Ok(Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF)), Ok(Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)))
[REPORT]     Reserves: Vec(Ok(11000000000000), Ok(11000000000000))
[REPORT]     LP Token: Contract(CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW) User LP Balance: 11000000000000
[REPORT]   Pool: Contract(CBNMFT27LQH4FQELKAQM2KFBYPABPTGZOSJDGDDGQWDCM7FU54HFLEBI)
[REPORT]     Tokens: Vec(Ok(Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)), Ok(Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG)))
[REPORT]     Reserves: Vec(Ok(11000000000000), Ok(10999000000000))
[REPORT]     LP Token: Contract(CBNMFT27LQH4FQELKAQM2KFBYPABPTGZOSJDGDDGQWDCM7FU54HFLEBI) User LP Balance: 21998999499983
[REPORT] Phoenix Pools:
[REPORT]   Pool: Contract(CAVCZPBF2IBGORHDJFMJPNKVEYJWEZW52NF7M3XIVLUIVLMQO3KESYZA)
[REPORT]     Pool Info: PoolResponse { asset_a: Asset { address: Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF), amount: 14000000000000 }, asset_b: Asset { address: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN), amount: 8000000000000 }, asset_lp_share: Asset { address: Contract(CCO3TGKNVFUK4JKLRTBNRY6BX3XKESSFRKHNIOQVMAGHUI7BDTC4AJWW), amount: 7000000000000 }, stake_address: Contract(CACX5TJTACPXUMJIMVWMMVJHQOGD376WYV73GC37BGJN3442MVCJCSUA) }
[REPORT]     Asset A: Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF) amount: 14000000000000
[REPORT]     Asset B: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN) amount: 8000000000000
[REPORT]     LP Share: Contract(CCO3TGKNVFUK4JKLRTBNRY6BX3XKESSFRKHNIOQVMAGHUI7BDTC4AJWW) amount: 7000000000000
[REPORT]     User LP Balance: 6999999999000
[REPORT]   Pool: Contract(CDYISRMQ4ME3PF6HRDYFJFLTV4TENJBV2X5HPJU23IFEAQSHKL2H2X4B)
[REPORT]     Pool Info: PoolResponse { asset_a: Asset { address: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN), amount: 1998000000000 }, asset_b: Asset { address: Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG), amount: 2000000000000 }, asset_lp_share: Asset { address: Contract(CCSZRO2PYKLSSTZXGVDKTKB7EIATYFM54HLO4IRG3LJPPMJISLWM3AWF), amount: 1998999998999 }, stake_address: Contract(CCR7CS5VIG6QAIWWDH6ZYI3YXBHIGRIT75ZP7WTMHQ2B2A2XEP7D7UGJ) }
[REPORT]     Asset A: Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN) amount: 1998000000000
[REPORT]     Asset B: Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG) amount: 2000000000000
[REPORT]     LP Share: Contract(CCSZRO2PYKLSSTZXGVDKTKB7EIATYFM54HLO4IRG3LJPPMJISLWM3AWF) amount: 1998999998999
[REPORT]     User LP Balance: 1998999998999
[REPORT] Comet Pools:
[REPORT]   Pool: Contract(CDB66KXGRE5VULNX2QCO4OFKJ4FLV7J3C64DNSGS2PG4IYYO3IMF6QVS)
[REPORT]     Tokens: Vec(Ok(Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF)), Ok(Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)))
[REPORT]       Balance for token Contract(CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF): 1001000
[REPORT]       Balance for token Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN): 1001000
[REPORT]   Pool: Contract(CALOLHPDL32YUZ6THJ5TA7LX7QGOOXFWIUJR4NE6T7LNS66VSE5U7EUY)
[REPORT]     Tokens: Vec(Ok(Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN)), Ok(Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG)))
[REPORT]       Balance for token Contract(CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN): 1001000
[REPORT]       Balance for token Contract(CDLDVFKHEZ2RVB3NG4UQA4VPD3TSHV6XMHXMHP2BSGCJ2IIWVTOHGDSG): 1001000

thread 'tests::test_setup::test_setup_verification' panicked at /home/silence/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-22.1.3/src/host.rs:847:9:
HostError: Error(WasmVm, MissingValue)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, MissingValue)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, MissingValue)], data:["contract call failed", balance, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW, topics:[error, Error(WasmVm, MissingValue)], data:["trying to invoke non-existent contract function", balance]
   3: [Diagnostic Event] topics:[fn_call, CAJOCEPE5NNLWXTDMY4FDWX7CO74QVOXK2XCCV3GR77O7BCWKD6CUDOW, balance], data:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4

Writing test snapshot file for test "tests::test_setup::test_setup_verification" to "test_snapshots/tests/test_setup/test_setup_verification.1.json".
FAILED